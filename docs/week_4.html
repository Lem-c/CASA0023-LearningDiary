<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Remotely sensing learning diary - 04 Policy Applications</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week_6.html" rel="next">
<link href="./week_3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="index.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week_4.html">04 Policy Applications</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Remotely sensing learning diary</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The origin of all things: week1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Try the presentation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Fusion: Principles and Methods</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">04 Policy Applications</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Google Earth Engine</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification I</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Classification The Big Questions (Lecture 6 continued) and Accuracy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week_9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SAR in GEE</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary">Summary</a>
  <ul class="collapse">
  <li><a href="#data-from-sensors" id="toc-data-from-sensors" class="nav-link" data-scroll-target="#data-from-sensors">Data from sensors</a></li>
  <li><a href="#land-use-and-land-cover-lulc" id="toc-land-use-and-land-cover-lulc" class="nav-link" data-scroll-target="#land-use-and-land-cover-lulc">Land use and Land cover (LULC)</a></li>
  <li><a href="#synthetic-aperture-radar-sar" id="toc-synthetic-aperture-radar-sar" class="nav-link" data-scroll-target="#synthetic-aperture-radar-sar">Synthetic Aperture Radar (SAR)</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application">Application</a>
  <ul class="collapse">
  <li><a href="#case-study-london-plan" id="toc-case-study-london-plan" class="nav-link" data-scroll-target="#case-study-london-plan">Case study: London Plan</a></li>
  <li><a href="#landsat-pre-processing-steps" id="toc-landsat-pre-processing-steps" class="nav-link" data-scroll-target="#landsat-pre-processing-steps">Landsat pre-processing steps</a></li>
  </ul></li>
  <li><a href="#reading-week-temperature" id="toc-reading-week-temperature" class="nav-link" data-scroll-target="#reading-week-temperature">05 Reading Week: Temperature</a>
  <ul class="collapse">
  <li><a href="#presentation-paths" id="toc-presentation-paths" class="nav-link" data-scroll-target="#presentation-paths">Presentation paths</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection">Reflection</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><strong>References</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">04 Policy Applications</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<section id="data-from-sensors" class="level3">
<h3 class="anchored" data-anchor-id="data-from-sensors">Data from sensors</h3>
<p>Satellites collect a wide array of data using different parts of the electromagnetic spectrum, each revealing unique details about the Earth’s surface and atmosphere. They capture everything from visible light and near-infrared, which show us images like what our eyes see and help monitor vegetation health and urban growth, to thermal infrared that detects the Earth’s heat emission for studying temperature changes and identifying wildfires. Microwave sensors, divided into several bands including C, X and L bands <span class="citation" data-cites="ICEYE_web">(<a href="#ref-ICEYE_web" role="doc-biblioref"><span>“ICEYE: Satellite Data,”</span> n.d.</a>)</span>, cut through clouds and vegetation to gather data in any weather, useful for tracking soil moisture and sea temperatures. Radar and Lidar technologies provide detailed images and 3D maps for studying terrain, forest structures, and urban development. There’s even data from ultraviolet to X-ray bands, though less used for Earth observation, they’re crucial for studying atmospheric conditions and cosmic phenomena. Together, these diverse data streams allow scientists to explore everything from climate patterns to natural disasters, offering insights essential for understanding and protecting our planet.</p>
</section>
<section id="land-use-and-land-cover-lulc" class="level3">
<h3 class="anchored" data-anchor-id="land-use-and-land-cover-lulc">Land use and Land cover (LULC)</h3>
<p>Urban green spaces <span class="citation" data-cites="shahtahmassebi2021remote">(<a href="#ref-shahtahmassebi2021remote" role="doc-biblioref">Shahtahmassebi et al. 2021</a>)</span> are analyzed using data from Landsat and Sentinel satellites, alongside LiDAR with high spatial resolution, to study vegetation health and accessibility to green areas, as well as to evaluate urban planning efforts through tools like Google Street View and Google Earth Engine. For disaster response and preparedness, Sentinel-2 spectral imagery is used to compare pre-event and post-event conditions, conduct view-shed analysis, and utilize clustering techniques to assist in building 3D models for events like the Beirut explosion, aiding in efficient and informed disaster management strategies.</p>
</section>
<section id="synthetic-aperture-radar-sar" class="level3">
<h3 class="anchored" data-anchor-id="synthetic-aperture-radar-sar">Synthetic Aperture Radar (SAR)</h3>
<p>Its capabilities as an active sensing system that captures surface texture data and can see through weather and clouds due to different wavelengths and polarizations. SAR operates in multiple bands like X, C, S, L, and P <span class="citation" data-cites="nasa_sar">(<a href="#ref-nasa_sar" role="doc-biblioref"><span>“What Is SAR?”</span> n.d.</a>)</span>, each with varying applications from high-resolution urban monitoring to biomass and vegetation mapping. The polarization of SAR, whether horizontal, vertical, or dual, affects how it interacts with materials and can aid in differentiating features such as rough surfaces and double-bounce reflections in urban areas. SAR imagery can also undergo various corrections for improved clarity and accuracy. With different wavelengths, SAR can penetrate surfaces to varying degrees, affecting volume scattering and thus enabling diverse applications like terrain mapping and change detection. The slides touch on the use of SAR in urban monitoring, explaining how the unique properties of SAR, such as backscatter and polarization, can be utilized to analyze and understand urban structures and natural environments.</p>
</section>
</section>
<section id="application" class="level2">
<h2 class="anchored" data-anchor-id="application">Application</h2>
<section id="case-study-london-plan" class="level3">
<h3 class="anchored" data-anchor-id="case-study-london-plan">Case study: London Plan</h3>
<p>London, as one of the world’s major cities <span class="citation" data-cites="GLA2021">(<a href="#ref-GLA2021" role="doc-biblioref">Greater London Authority 2021</a>)</span>, faces a unique set of challenges posed by the urban heat island (UHI) effect—a phenomenon where urban regions experience higher temperatures than their rural surroundings. Policy SI4 of the London Plan 2021 seeks to mitigate this by guiding new developments to minimize internal overheating and reduce reliance on air conditioning systems.</p>
<ul>
<li><p>Policy SI 4 Managing heat risk <span class="citation" data-cites="abercrombie1944greater">(<a href="#ref-abercrombie1944greater" role="doc-biblioref">Abercrombie 1944</a>)</span> p354 introduces that Policy SI 4 Managing Heat Risk addresses the adverse impacts of the UHI effect by setting out a cooling hierarchy that includes reducing heat entry, minimizing internal heat generation, and enhancing building heat management through design. This policy is essential in the context of London’s changing climate, where the city is experiencing higher average temperatures and more severe hot weather events.</p></li>
<li><p>Urban development proposals must mitigate the urban heat island effect through thoughtful <strong>design, materials, and green infrastructure</strong>. Major developments need an <strong>energy strategy</strong> to reduce internal overheating and air conditioning reliance, following a cooling hierarchy that prioritizes:</p></li>
</ul>
<ol type="1">
<li><strong>Reducing heat entry</strong> via orientation, shading, and insulation.</li>
<li><strong>Minimizing internal heat</strong> through efficient design.</li>
<li><strong>Managing internal heat</strong> with thermal mass and high ceilings.</li>
<li><strong>Enabling passive ventilation</strong>, followed by mechanical ventilation.</li>
<li><strong>Considering active cooling systems</strong> only as a last resort.</li>
</ol>
<p>Climate change has heightened London’s temperature, exacerbating the urban heat island effect and health risks during extreme heat. New developments must address citywide and building-specific overheating. Strategies include avoiding excessive glazing and promoting passive ventilation. Air conditioning, which contributes to urban heat, should be minimized. The <strong>Chartered Institution of Building Services Engineers (CIBSE)</strong> provides guidelines for addressing overheating in new and refurbished buildings, ensuring designs are future-proof against climate change.</p>
<ul>
<li>Application Criterion: Remotely sensed data, particularly from satellite imagery and thermal mapping, can be instrumental in assessing UHI impacts and guiding urban planning. Such data could inform strategies for building orientation, the placement of green spaces, and the materials used in construction to manage heat risk effectively.</li>
</ul>
</section>
<section id="landsat-pre-processing-steps" class="level3">
<h3 class="anchored" data-anchor-id="landsat-pre-processing-steps">Landsat pre-processing steps</h3>
<p>Included: (i) image re-sampling, (ii) conversion of raw digital values (DN) to top of atmosphere (TOA) reflectance, (iii) cloud/shadow/water screening and quality assessment (QA), and (iv) image normalization”</p>
<p>Policy SI4 offers a progressive framework for sustainable urban development, using remotely sensed data to address London’s UHI challenge.</p>
</section>
</section>
<section id="reading-week-temperature" class="level1">
<h1>05 Reading Week: Temperature</h1>
<p><a href="https://lem-c.github.io/temp_map/">History temperature and CO2 emissions in UK</a></p>
<section id="presentation-paths" class="level2">
<h2 class="anchored" data-anchor-id="presentation-paths">Presentation paths</h2>
<ul>
<li><p>Low Traffic Neighbourhoods: what, why and where?</p></li>
<li><p>UHI in phoenix <span class="citation" data-cites="chow2012urban">(<a href="#ref-chow2012urban" role="doc-biblioref">Chow, Brennan, and Brazel 2012</a>)</span></p></li>
<li><p>https://zhuanlan.zhihu.com/p/419122903</p></li>
</ul>
</section>
<section id="reflection" class="level2">
<h2 class="anchored" data-anchor-id="reflection">Reflection</h2>
<p>Reflecting on my journey to understand the hot spots in cities has been like unfolding a map that leads from a single point of curiosity to a vast landscape of global environmental challenges. It all started with noticing how some parts of the city felt warmer, which drew a deep dive into learning from various fields. By combining insights from satellite images, exploring city planning policies, and diving into environmental science, I’ve combined together a clearer picture of why cities get so warm and what it means for us.</p>
<p>This adventure has taught me the value of looking at problems from different angles. It’s not just about the heat; it’s about how we design our cities, the rules that guide our urban development, and the new technologies that let us see our environment in different ways. This mix of personal experience, academic study, and the latest tech has shown me that tackling big challenges requires a mix of knowledge, curiosity, and a willingness to explore.</p>
<p>In short, this week has opened my eyes. It’s shown me that getting to grips with the issue of cities heating up is crucial for building sustainable places for us to live. And through this process, I’ve learned that when we combine our personal observations with approach to learning and technology can make a real impact.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references"><strong>References</strong></h2>


<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-abercrombie1944greater" class="csl-entry" role="listitem">
Abercrombie, Patrick. 1944. <em>Greater London Plan</em>. HM Stationery Office.
</div>
<div id="ref-chow2012urban" class="csl-entry" role="listitem">
Chow, Winston TL, Dean Brennan, and Anthony J Brazel. 2012. <span>“Urban Heat Island Research in Phoenix, Arizona: Theoretical Contributions and Policy Applications.”</span> <em>Bulletin of the American Meteorological Society</em> 93 (4): 517–30.
</div>
<div id="ref-GLA2021" class="csl-entry" role="listitem">
Greater London Authority. 2021. <span>“<span>The London Plan 2021</span>.”</span> <a href="https://www.london.gov.uk/programmes-strategies/planning/london-plan/new-london-plan/london-plan-2021" class="uri">https://www.london.gov.uk/programmes-strategies/planning/london-plan/new-london-plan/london-plan-2021</a>.
</div>
<div id="ref-ICEYE_web" class="csl-entry" role="listitem">
<span>“ICEYE: Satellite Data.”</span> n.d. <a href="https://www.iceye.com/satellite-data" class="uri">https://www.iceye.com/satellite-data</a>.
</div>
<div id="ref-shahtahmassebi2021remote" class="csl-entry" role="listitem">
Shahtahmassebi, Amir Reza, Chenlu Li, Yifan Fan, Yani Wu, Muye Gan, Ke Wang, Arunima Malik, George Alan Blackburn, et al. 2021. <span>“Remote Sensing of Urban Green Spaces: A Review.”</span> <em>Urban Forestry &amp; Urban Greening</em> 57: 126946.
</div>
<div id="ref-nasa_sar" class="csl-entry" role="listitem">
<span>“What Is SAR?”</span> n.d. <a href="https://www.earthdata.nasa.gov/learn/backgrounders/what-is-sar" class="uri">https://www.earthdata.nasa.gov/learn/backgrounders/what-is-sar</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week_3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Data Fusion: Principles and Methods</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week_6.html" class="pagination-link">
        <span class="nav-page-text">Google Earth Engine</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>